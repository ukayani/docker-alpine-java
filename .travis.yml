sudo: required

services:
  - docker
env:
  global:
  - secure: GgQZu/o7U4GHr/kqIjuusAVPHfhtZIRHL5Ez94e5c2u61MORJkii4r2IsiqNo1UAH3Oq43LHjH2QDxLPkrrPXs/48FoFc6TMz2HzYhqvvFzl8r7MQdfaWGbe/BLibDWLtBXBmUxh0HEjHxDTxBp16Ek95kD/uhwns7ng6dP/tRi6wIJoI30rUwxxHwc3V5JNBX/UzyxMT8cVOiPRGdClqNG4zIko4Ph6swzybvhp1XiC/Um67MWKxL3zIxVWaAYma9hV5TBfbZeZ7PVuGPj7ttP4U7mzCtAnPMFeG5lJP8bstaI2bINr0z2gcxSk4GqPxkj7Q9EQsViIEJthBF19+vyTke325lVy6Ot7AteZL7JsWzLQCMBlYDnEMRLyaRCUDs8d/hALUvbrceSydhglEgVdebeCr8ayNWR9wfUcHSjPTeQvBXNliojAv+WUUHavF63y+Istp+FnPYD2h9RcenHp05PRE69vnUI3GhyLvxs9RDNNuiq9QEq9GuJ9zZt/BTsYlZtmi+A3DrJEFsUHB74WUcxcdz8G1wK941YbKzkaeNrh9CXlTB7Mj7fDPdDoIWKOq+Opu38IwDSoiZSE7Cb3Hw+WB0bbohbOmnbfUeqLNmRSzupGirsfu8xDUVc8DfzvQhRajQC62r0L/PjXxj+v6s28x4OghFAapvArVnY= #EMAIL
  - secure: 0rKg+fmEjA3oDa5JphXH1EK0Ap2w6p3RnXvGcQdUAT5G/W8aXYk1B8TCyBqhkBRKxauGkNf+w9/ljZJzh2IxHKdaMoHJZzLpiw6aHodnYatPBX7tmJbqrjeNVQOj27n145awP9FncCu7+zPO7lZ7Rt3WiLOL2GByOoOOW0aN9PZUeDrfGkhsXidnXFSVtMWJp4fa5dD2SVjpHYy2vKmhlhTD9+IULJoHFsxUTi5iPgKEwgzr0j8UuPXpBvX5Qbmoa9p35LHyFyrp86p54YXGNf/OjK1zg9e/SaNCyEo7k/qntgGt2uHHrLAuP9rMb7JsEg/Es9j8dq2icJRQyiILk+Ni8CKHND5UhWA8WGLqOOt8DFZxpKbiYFp67VuJolyMex67YL4WrpPFGwRQ+7eCmv5R6CmZnTHA61Hl1P9MMRmvZKsKVbDwqvpKiWwO8FfsXmT8fH8w9QfFT1GJ+OZwCjbxBcYryollsx8EtivxD073fxTpJJJjfp5TvH7W9EUhV1MmyWvTxnqsHjSCI9O6ELSn/yQkdt16iEmUtI68C1u4QrXhvgI5RMbXEJl00xP2NaDdiPyDv+FLsp57GyLsNpHVmBAyTaEi8jOplMWzhwjZyohdLy2atULSIrlWBIzlcfCTG/Oz3Oy4kpiZFg5NP344Zrj52KQiFQ1BqkPl1zY= #USERNAME
  - secure: NZMwpB3vU1VdD8ATap56zNNxFiyfhivSOU8+R88NulixLx+fX/HZo2fd9oY0DWcGEnlqDKfNrL7Qx2r5MoMpyvG/ZFxCM6IlVDRQlu6x+E3Dq1KomlU9Nm5MhaGDg4/YmeoNpP70j+xgXzsLEGID/B9u4Nv7wPk6Q/MCAliukKctb/kl4f4fEPjP8WjSJ9eDfrzm4h4S/A3bN6Kk7HB4jRzcGioPbRAUno8H70+f0sE9J6XPAoNUW3fIQm91ckzpMRXbLy7DGhgaWvV/Beda3acQ/z7ixqrO3YcA5TxFuW2UuDsspK3yUCwsGydejstCJSmmfRQbDo96CqkB0b52XSZMo2EXDyE2yXDIggoZp6HBhjzZxBdjlVM/Lnah6hS7KRLEJYYU9a9xl6x5VbjyASyjGlgB84THt9pwGuOBAgeDQ1O21i5OhQ9YTJyGZbX1mk2i/f2pjuKF4/QvPAcCXDygXM8VUHTAhvDTgp3t3WnN193L+AB3k1dax7ktLdmKxJ8FGViW395Vqb/7anz6/s7Q2On30hdSnBvgCVZvBjkJdOQ+f3ZqWlK1BuD4JHVQNsxPvInu9QLX8Pj5tE3DALznBKALluQW9KaHb438or7pvK5lNHthJZ6CB7cdfpWknEq2cKMJULOMzZ6fBrzR1ovwZMasGnoQl0B6eMSW34g= #PASSWORD
  - COMMIT=${TRAVIS_COMMIT::8}
  - DOCKER_REPO=kayaniu/alpine-java

script:
  - export BRANCH=$(if [ "$TRAVIS_PULL_REQUEST" == "false" ]; then echo $TRAVIS_BRANCH; else echo $TRAVIS_PULL_REQUEST_BRANCH; fi)
  - echo "TRAVIS_BRANCH=$TRAVIS_BRANCH, BRANCH=$BRANCH"

after_success:
  - ./publish.sh